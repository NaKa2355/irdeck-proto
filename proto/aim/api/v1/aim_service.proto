syntax = "proto3";

package aim;

option go_package = "github.com/NaKa2355/irdeck-proto/gen/go/aim/api/v1";

import "aim/api/v1/appliance.proto";
import "common/irdata/v1/raw_irdata.proto";
import "google/protobuf/empty.proto";

message AddCustomRequest {
    string name = 1;
    string device_id = 2;
}

message AddToggleRequest{
    string name = 1;
    string device_id = 2;
}

message AddButtonRequest{
    string name = 1;
    string device_id = 2;
}

message AddThermostatRequest{
    string name = 1;
    string device_id = 2;
    float temp_scale = 3;
    uint32 maximum_heating_temp = 4;
    uint32 minimum_heating_temp = 5;
    uint32 maximum_cooling_temp = 6;
    uint32 minimum_cooling_temp = 7;
}

message AddAppResponse {
    string id = 1;
}

message AddCommandRequest {
    string appliance_id = 1;
    string name = 2;
}

message GetAppliancesResponse {
    repeated Appliance appliances = 1;
}

message GetApplianceRequest {
    string id = 1;
}

message RenameApplianceRequest {
    string id = 1;
    string name = 2;
}

message ChangeDeviceRequest {
    string id = 1;
    string device_id = 2;
}

message DeleteApplianceRequest {
    string appliance_id = 1;
}

message DeleteCommandRequest {
    string appliance_id = 1;
    string command_id = 2;
}

message GetCommandRequest {
    string appliance_id = 1;
    string command_id = 2;
}

message GetCommandResponse {
    string command_id = 1;
    string name = 2;
    irdata.IrData irdata = 3;
}

message SetIRDataRequest {
    string id = 1;
    irdata.IrData irdata = 2;
}

message ApplianceUpdateNotification {
    string appliance_id = 1;
    enum UpdateType {
        UPDATE_TYPE_UNSPECIFIED = 0;
        UPDATE_TYPE_ADD = 1;
        UPDATE_TYPE_DELETE = 2;
    }
    UpdateType update_type = 2;
}

service AimService {
    rpc AddCustom(AddCustomRequest) returns (AddAppResponse) {}
    rpc AddToggle(AddToggleRequest) returns (AddAppResponse) {}
    rpc AddButton(AddButtonRequest) returns (AddAppResponse) {}
    rpc AddThermostat(AddThermostatRequest) returns (AddAppResponse) {}
    rpc AddCommand(AddCommandRequest) returns (google.protobuf.Empty) {}

    rpc GetCustom(GetApplianceRequest) returns (Custom) {}
    rpc GetToggle(GetApplianceRequest) returns (Toggle) {}
    rpc GetButton(GetApplianceRequest) returns (Button) {}
    rpc GetThermostat(GetApplianceRequest) returns (Thermostat) {}
    rpc GetAppliances(google.protobuf.Empty) returns(GetAppliancesResponse) {}
    rpc GetCommand(GetCommandRequest) returns (GetCommandResponse) {}

    rpc RenameAppliance(RenameApplianceRequest) returns(Appliance) {}
    rpc ChangeDevice(ChangeDeviceRequest) returns (Appliance) {}
    rpc SetIrData(SetIRDataRequest) returns(google.protobuf.Empty) {}

    rpc DeleteAppliance(DeleteApplianceRequest) returns (google.protobuf.Empty) {}
    rpc DeleteCommand(DeleteCommandRequest) returns (google.protobuf.Empty) {}

    rpc NotifyApplianceUpdate(google.protobuf.Empty) 
        returns (ApplianceUpdateNotification) {}
}